<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Dashboard React (senza Node)</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
    }
    .dashboard-container {
      display: flex;
      height: 100vh;
      align-items: stretch;
    }
    .left-panel {
      flex: 1;
      background: #fff;
      padding: 40px;
      box-shadow: 2px 0 8px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
    }
    .right-panel {
      flex: 1;
      background: #e3eafc;
      padding: 40px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      box-sizing: border-box;
      min-height: 0;
      height: 100%;
    }
    .title {
      font-size: 2em;
      margin-bottom: 20px;
    }
    .value {
      font-size: 3em;
      margin-bottom: 10px;
    }
    .label {
      font-size: 1.2em;
      color: #555;
      margin-bottom: 30px;
    }
    #weatherBoxes {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 30px;
      max-width: 100%;
      width: 100%;
      box-sizing: border-box;
      justify-content: flex-end;
    }
    .weather-hour-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100px;
      height: 100px;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.12);
      font-size: 1.3em;
      margin-bottom: 12px;
    }
    .weather-hour-time {
      font-size: 1.4em;
      color: #888;
      margin-bottom: 8px;
    }
    .weather-hour-emoji {
      font-size: 3.5em;
      margin-bottom: 8px;
    }
    .weather-hour-temp {
      font-size: 2em;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const tempData = {
      labels: ["08:00", "09:00", "10:00", "11:00", "12:00", "13:00"],
      datasets: [{
        label: "Temperatura (°C)",
        data: [21, 21.5, 22, 22.2, 22.1, 22],
        borderColor: "rgba(255,99,132,1)",
        backgroundColor: "rgba(255,99,132,0.1)",
        fill: true,
        tension: 0.3
      }]
    };
    const humData = {
      labels: ["08:00", "09:00", "10:00", "11:00", "12:00", "13:00"],
      datasets: [{
        label: "Umidità (%)",
        data: [44, 45, 45, 46, 45, 45],
        borderColor: "rgba(54,162,235,1)",
        backgroundColor: "rgba(54,162,235,0.1)",
        fill: true,
        tension: 0.3
      }]
    };
    const weatherHours = [
      { ora: "00", temp: 18, icon: "🌙" },
      { ora: "01", temp: 18, icon: "🌙" },
      { ora: "02", temp: 17, icon: "🌙" },
      { ora: "03", temp: 17, icon: "🌙" },
      { ora: "04", temp: 16, icon: "🌙" },
      { ora: "05", temp: 16, icon: "🌙" },
      { ora: "06", temp: 17, icon: "🌤️" },
      { ora: "07", temp: 18, icon: "🌤️" },
      { ora: "08", temp: 20, icon: "☀️" },
      { ora: "09", temp: 22, icon: "☀️" },
      { ora: "10", temp: 24, icon: "☀️" },
      { ora: "11", temp: 25, icon: "☀️" },
      { ora: "12", temp: 26, icon: "☀️" },
      { ora: "13", temp: 27, icon: "☀️" },
      { ora: "14", temp: 28, icon: "☀️" },
      { ora: "15", temp: 28, icon: "☀️" },
      { ora: "16", temp: 27, icon: "☀️" },
      { ora: "17", temp: 26, icon: "☀️" },
      { ora: "18", temp: 25, icon: "☀️" },
      { ora: "19", temp: 24, icon: "☀️" },
      { ora: "20", temp: 23, icon: "🌤️" },
      { ora: "21", temp: 22, icon: "🌤️" },
      { ora: "22", temp: 21, icon: "🌙" },
      { ora: "23", temp: 20, icon: "🌙" }
    ];

    function Dashboard() {
      const tempChartRef = React.useRef(null);
      const humChartRef = React.useRef(null);
      const [dateTime, setDateTime] = React.useState("");

      React.useEffect(() => {
        if (window.Chart) {
          if (tempChartRef.current) {
            new window.Chart(tempChartRef.current, {
              type: "line",
              data: tempData,
              options: {
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: false } }
              }
            });
          }
          if (humChartRef.current) {
            new window.Chart(humChartRef.current, {
              type: "line",
              data: humData,
              options: {
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: false } }
              }
            });
          }
        }
      }, []);

      React.useEffect(() => {
        function updateDateTime() {
          const now = new Date();
          const options = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
          const dateStr = now.toLocaleDateString("it-IT", options);
          const timeStr = now.toLocaleTimeString("it-IT", { hour: "2-digit", minute: "2-digit" });
          setDateTime(`${dateStr} - ${timeStr}`);
        }
        updateDateTime();
        const interval = setInterval(updateDateTime, 1000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="dashboard-container">
          <div className="left-panel">
            <div className="title">Casa</div>
            <div className="value" id="temperature">22°C</div>
            <div className="label">Temperatura</div>
            <canvas ref={tempChartRef} width={180} height={70} style={{ marginBottom: 20 }} />
            <div className="value" id="humidity">45%</div>
            <div className="label">Umidità</div>
            <canvas ref={humChartRef} width={180} height={70} />
          </div>
          <div className="right-panel">
            <div className="title" style={{ marginTop: 40 }}>Meteo</div>
            <div style={{ fontSize: '1.1em', color: '#444', marginBottom: 18 }}>{dateTime}</div>
            <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'flex-end' }}>
              <div className="value">Soleggiato</div>
              <div className="label">25°C</div>
              <div id="weatherBoxes">
                {weatherHours.map((w) => (
                  <div key={w.ora} className="weather-hour-box">
                    <div className="weather-hour-time">{w.ora}:00</div>
                    <div className="weather-hour-emoji">{w.icon}</div>
                    <div className="weather-hour-temp">{w.temp}°</div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<Dashboard />);
  </script>
</body>
</html>

